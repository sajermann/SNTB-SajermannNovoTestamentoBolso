# # https://github.com/marketplace/actions/ftp-deploy
# on: 
#   push:
#     branches:
#       - main
# name: ðŸš€ Deploy website on push
# jobs:
#   web-deploy:
#     name: ðŸŽ‰ Deploy
#     runs-on: ubuntu-latest
#     working-directory: ./Backend/Publish/
    
#     steps:
#     - name: ðŸšš Get latest code
#       uses: actions/checkout@v2
      
#     - name: FTP Deploy
#       uses: SamKirkland/FTP-Deploy-Action@4.0.0
      
#       with:
#         server: ${{ secrets.ftp_server_linkhost}}
#         username: ${{ secrets.ftp_username_linkhost }}
#         password: ${{ secrets.ftp_pass_linkhost }}
#         server-dir: /1.sajermann.com/
#         local-dir: ./Backend/Publish/

# # https://github.com/marketplace/actions/simple-ftp-deploy
# on: 
#   push:
#     branches:
#       - main
# name: ðŸš€ Deploy website on push
# jobs:
#   web-deploy:
#     name: ðŸŽ‰ Deploy
#     runs-on: ubuntu-latest
#     steps:
#       - name: ðŸšš Get latest code
#         uses: actions/checkout@v2
      
#       - name: Simple FTP deploy
#         uses: kevinpainchaud/simple-ftp-deploy-action@v1.2.1

#         with:
#           ftp_host: ${{ secrets.ftp_server_linkhost}}
#           ftp_username: ${{ secrets.ftp_username_linkhost }}
#           ftp_password:  ${{ secrets.ftp_pass_linkhost }}
#           local_source_dir: "./Backend/Publish/"
#           dist_target_dir: "/1.sajermann.com/"
#           delete: "true"
#           exclude: "'^logs/' '^README.md'"

# https://github.com/marketplace/actions/ftp-deployer
on: 
  push:
    branches:
      - main
name: ðŸš€ Deploy website on push
jobs:
  web-deploy:
    name: ðŸŽ‰ Deploy
    runs-on: ubuntu-latest
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v2

        #Daqui atÃ©... Ã© do .Net
      - name: Publish dotnet
        uses: actions/setup-dotnet@v1
        with:
          dotnet-version: 5.0.202
      - name: Listar Pastas
        working-directory: ./Backend/
        run: ls
      - name: VersÃ£o do SDK
        working-directory: ./Backend/
        run: dotnet --version
      - name: Restore dependencies
        working-directory: ./Backend/
        run: dotnet restore
      - name: Build
        run: dotnet build --no-restore
      - name: Publish
        run: dotnet publish -o Publish
        #AtÃ© aqui
      
      - name: FTP Deployer
        uses: sand4rt/ftp-deployer@v1.3

        with:
          host: ${{ secrets.ftp_server_linkhost}}
          username: ${{ secrets.ftp_username_linkhost }}
          password:  ${{ secrets.ftp_pass_linkhost }}
          local_folder: "./Backend/Publish/"
          remote_folder: "/1.sajermann.com/"